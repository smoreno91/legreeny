!function(e){function n(){return e(window).width()<=767||e(".em-menu-mobile").length}function t(){var t=e(".em_nav"),i=t.length;if(i)for(var o=0;i>o;o++){var r=e(".hnav, .vnav",t.eq(o));e("a.arrow",r).bind(isWindowPhone?"mouseenter":"click",function(t){if(n()){t.preventDefault(),t.stopPropagation();var i=e(this.parentNode);if(!i.hasClass("cur-toggle")&&e("li.cur-toggle",r).length>0&&!(i.parents("li.cur-toggle").length>0)){alert("has");for(var o=e("li.cur-toggle",r),a=e("li.cur-toggle",r).length,l=0;a>l;l++)o.eq(l).removeClass("cur-toggle"),"none"!=o.eq(l).css("display")&&o.eq(l).children("ul").slideToggle()}i.children("ul").slideToggle(),i.hasClass("cur-toggle")?i.removeClass("cur-toggle"):0==i.parents("li.cur-toggle").length&&i.addClass("cur-toggle")}})}}function i(){if(e(window).width()>767&&!e(".em-menu-mobile").length){var n=e(".em_nav"),t=n.length;if(t)for(var i=0;t>i;i++)for(var o=e(".hnav, .vnav",n.eq(i)),r=(e(this.parentNode),e("li",o)),a=r.length,l=0;a>l;l++)r.eq(l).children("ul").css("display","")}}function o(){function n(e,n){var t=n.offset().left+n.outerWidth()-(e.offset().left+e.outerWidth()),i=e.offset().left+t-n.offset().left;0>i&&(t-=i),0>t&&e.css("left",t-10+"px")}e(".em_nav > .hnav > .menu-item-link > .menu-container").parent().hover(function(){var t=e(this).children(".menu-container");e(this).hasClass("menu-item-depth-0")&&t.css("left",0);var i=e(this).parents(".em-menu-fix-pos").first();i.length&&n(t,i)},function(){e(this).children(".menu-container").css("left","")})}function r(){function n(n,t){var i=e(window).width()-(t.offset().left+t.outerWidth(!0)),o=e(window).width()-(n.offset().left+n.outerWidth(!0)),r=i+t.outerWidth(!0)-(o+n.outerWidth(!0)),a=o+r-i;0>a&&(r-=a),0>r&&n.css("right",r-10+"px")}e(".em_nav > .hnav > .menu-item-link > .menu-container").parent().hover(function(){var t=e(this).children(".menu-container");e(this).hasClass("menu-item-depth-0")&&t.css("right",0);var i=e(this).parents(".em-menu-fix-pos").first();i.length&&n(t,i)},function(){e(this).children(".menu-container").css("right","")})}function a(){!isPhone&&e(window).width()>767&&!e(".em-menu-mobile").length?e(".vnav > .menu-item-link > .menu-container > li.fix-top").length>0&&(e(".vnav > .menu-item-link > .menu-container > li.fix-top").parent().parent().mouseover(function(){var n=e(this).children(".menu-container,ul.level0"),t=n.outerHeight(),i=n.offset().top,o=e(window).height(),r=t+i;$setTop=e(this).parent().offset().top-e(this).offset().top,$setTop+t<e(this).height()&&($setTop=e(this).outerHeight()-t);e(this).parents(".em_nav").first().parents().first();n.css("top",$setTop),o>r&&e(".vnav ul.level0,.vnav > .menu-item-link").children(".fix-top").parent(".menu-container").first().css("top",$setTop-9+"px")}),e(".vnav ul.level0,.vnav > .menu-item-link").children(".fix-top").parent(".menu-container").parent().mouseout(function(){var n=e(this).children(".menu-container,ul.level0");n.removeAttr("style")})):(e(".vnav > .menu-item-link > .menu-container > li.fix-top").parent().parent().off("mouseover mouseon"),e(".vnav > .menu-item-link > .menu-container > li.fix-top").parent().off("mouseover mouseon"),e(".vnav .menu-item-link > .menu-container,.vnav ul.level0").parent().off("mouseover mouseon"))}var l;e(document).ready(function(){e(".em_nav").each(function(n){var t=e(".hnav, .vnav",this);e(".em-catalog-navigation li.parent, .menu-item-link.menu-item-parent",t).each(function(){e(this).prepend('<a href="javascript:void(0)" class="arrow"><span>&gt;</span></a>')});for(var i=e(".em-catalog-navigation").find("li").find("a").not(".arrow"),o=i.length,n=0;o>n;n++)i.eq(n).addClass("em-menu-link")}),a(),clearTimeout(l),(0!=EM.SETTING.DISABLE_RESPONSIVE||e(".em-menu-mobile").length)&&(l=setTimeout(function(){t()},100)),1!=EM.SETTING.RIGHT_TO_LEFT?o():r()});var s;e(window).resize(function(){0!=EM.SETTING.DISABLE_RESPONSIVE&&(a(),clearTimeout(s),s=setTimeout(function(){i(),1!=EM.SETTING.RIGHT_TO_LEFT?o():r()},100))})}(jQuery);